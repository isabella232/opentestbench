#! /usr/bin/tcsh

if [[ ("$2" == "psnr") ]]; then
	#cat1
	codecs="{'XSM_psnr_labr0_ref' 'E6_ipx_low0' 'E6_ipx_low1' 'E6_ipx_low0_dq0' 'E6_ipx_low1_dq0'}"
	#cat2
	#codecs="{'XSM_psnr_labr0_ref' 'E6_ipx_22low0' 'E6_ipx_22low1' 'E6_ipx_22low0_dq0' 'E6_ipx_22low1_dq0'}"
	#cat3
	#codecs="{'XSM_psnr_labr0_ref' 'E6_ipx_53low0' 'E6_ipx_53low1' 'E6_ipx_53low0_dq0' 'E6_ipx_53low1_dq0'}"
elif [[ ("$2" == "visual") ]]; then
	codecs=
fi

if [[ ("$3" == "RGB8b") ]]; then
	picture_set="{'Tools_1520x1200_8b' 'HintergrundMusik_1920x1080_8b' 'FemaleStripedHorseFly_1920x1080_8b' 'RICHTER_ScreenContent2_4096x2160p_60_8b_sRGB_444_00001'  'ARRI_Lake2_2880x1620p_24_8b_bt709_444_0040' 'HUAWEI_ScMap_1280x720p_60_8b_sRGB_444_000' 'APPLE_BasketBallScreen_2560x1440p_60_8b_sRGB_444_000' 'RICHTER_ScreenContent_4096x2160p_15_8b_sRGB_444_0059'}"
	content_dirs_sb_factors="{'1' '1' '1' '1' '1' '1' '1' '1'}"
	color_spaces="{'RGB' 'RGB' 'RGB' 'RGB' 'RGB' 'RGB' 'RGB' 'RGB'}"
	chroma_subs="{'444' '444' '444' '444' '444' '444' '444' '444'}"
	bit_depths="{'8' '8' '8' '8' '8' '8' '8' '8'}"
	image_sizes="{'1520x1200' '1920x1080' '1920x1080' '4096x2160' '2880x1620' '1280x720' '2560x1440' '4096x2160'}"
	withWhisker=1
elif [[ ("$3" == "RGB10b") ]]; then
	picture_set="{'ARRI_AlexaDrums_3840x2160p_24_10b_bt709_444_00162' 'BLENDER_Sintel2_4096x1744p_24_10b_sRGB_444_00004606' 'EBU_PendulusWide_3840x2160p_50_10b_bt709_444_0001'}"
	content_dirs_sb_factors="{'1' '1' '1'}"
	color_spaces="{'RGB' 'RGB' 'RGB'}"
	chroma_subs="{'444' '444' '444'}"
	bit_depths="{'10' '10' '10'}"
	image_sizes="{'3840x2160' '4096x1744' '3840x2160'}"
	withWhisker=1
elif [[ ("$3" == "RGB12b") ]]; then
	picture_set="{'ARRI_AlexaHelicopterView_3840x2160p_24_12b_P3_444_00018'}"
	content_dirs_sb_factors="{'1'}"
	color_spaces="{'RGB'}"
	chroma_subs="{'444'}"
	bit_depths="{'12'}"
	image_sizes="{'3840x2160'}"
	withWhisker=0
elif [[ ("$3" == "42210b") ]]; then
	picture_set="{'ARRI_Lake2_2880x1620p_24_10b_bt709_422_0040' 'VQEG_CrowdRun_3840x2160p_50_10b_bt709_422_07111'}"
	content_dirs_sb_factors="{'1' '1'}"
	color_spaces="{'YCbCr' 'YCbCr'}"
	chroma_subs="{'422' '422'}"
	bit_depths="{'10' '10'}"
	image_sizes="{'2880x1620' '3840x2160'}"
	withWhisker=0
elif [[ ("$3" == "42212b") ]]; then
	picture_set="{'ARRI_AlexaDrums_3840x2160p_24_12b_P3_422_00162'}"
	content_dirs_sb_factors="{'1'}"
	color_spaces="{'YCbCr'}"
	chroma_subs="{'422'}"
	bit_depths="{'12'}"
	image_sizes="{'3840x2160'}"
	withWhisker=0
fi


if [[ ("$1" == "MG") ]]; then
test=multi_generation
bitrates=$4
niter=10
gen_number=0
path="{'../E6/graphics/$2_optimization/multi_generation_${bitrates}bpp'}"
withWhisker=0
elif [[ ("$1" == "SG") ]]; then
test=single_generation_delta
bitrates="[3 4 5 6 8 10 12]"
gen_number=1
niter=0
path="{'../E6/graphics/$2_optimization/single_generation'}"
fi


selectedbppforwhiskerall="[3 6 12]"

matlab -nodesktop -r "codecs=${codecs}; picture_set=${picture_set}; color_spaces=${color_spaces}; chroma_subs=${chroma_subs}; bit_depths=${bit_depths}; image_sizes=${image_sizes}; bitrates=${bitrates}; content_dirs_sb_factors=${content_dirs_sb_factors}; niter=${niter}; gen_number=${gen_number}; withWhisker=${withWhisker}; path=${path}; selectedbppforwhiskerall=${selectedbppforwhiskerall}; run ../benchmark_graphics/${test}.m; exit;"
