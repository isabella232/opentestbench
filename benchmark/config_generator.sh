#    Opentestbench : an open-source framework to assess the performances of image compression schemes
#    Copyright (C) 2015  intoPIX s.a. , Sébastien Lugan 
#    Copyright (C) 2015  Universite Catholique de Louvain, Alexandre Willème
#
#    Opentestbench is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, either version 3 of the License, or
#    (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#    
#   For any question please contact : 
#   Alexandre Willème (alexandre.willeme@uclouvain.be)


#!/bin/bash
export LANG=C



#for E7
#codecs=(E7_canon_low E7_canon_main E7_canon_high E7_fhg_low E7_fhg_main_la0br6 E7_fhg_high_la0br4 E7_ipx_low0 E7_ipx_low1 E7_ipx_53low0 E7_ipx_53low1 E7_ipx_22low0 E7_ipx_22low1 E7_ipx_main0_la0br6 E7_ipx_main1_la0br6 E7_ipx_high0_la0br6 E7_ipx_high1_la0br6) 
#paths=(XSMHIGHCLPATH XSMHIGHCLPATH XSMHIGHCLPATH XSMFZRNBOUNDEDSBPATH XSMFZRNBOUNDEDSBPATH XSMFZRNBOUNDEDSBPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH) 
#prefix_config='ce4_17_profile_comparison\/'
#configs=('XSM_v1.1.3-high-cl\/ce4_profile_CanonLow.ini' 'XSM_v1.1.3-high-cl\/ce4_profile_CanonMain.ini' 'XSM_v1.1.3-high-cl\/ce4_profile_CanonHigh.ini' 'XSM_v1.1.3-fzrn-bounded-sb\/profile_fzrn_low.ini' 'XSM_v1.1.3-fzrn-bounded-sb\/profile_fzrn_main_la0br6.ini' 'XSM_v1.1.3-fzrn-bounded-sb\/profile_fzrn_high_2v_la0br4.ini' 'XSM_v1.1.3-high\/ce4_ipx_low0.ini' 'XSM_v1.1.3-high\/ce4_ipx_low1.ini' 'XSM_v1.1.3-high\/ce4_ipx_53low0.ini' 'XSM_v1.1.3-high\/ce4_ipx_53low1.ini' 'XSM_v1.1.3-high\/ce4_ipx_22low0.ini' 'XSM_v1.1.3-high\/ce4_ipx_22low1.ini' 'XSM_v1.1.3-high\/ce4_ipx_main0_la0br6.ini' 'XSM_v1.1.3-high\/ce4_ipx_main1_la0br6.ini' 'XSM_v1.1.3-high\/ce4_ipx_high0_la0br6.ini' 'XSM_v1.1.3-high\/ce4_ipx_high1_la0br6.ini')

#for E1
#codecs=(E1_ipx_low0_labr0_slice8 E1_ipx_low0_labr0_slice16 E1_ipx_low0_labr0_slice32 E1_ipx_low0_labr0_slice64 E1_ipx_22low0_labr0_slice8 E1_ipx_22low0_labr0_slice16 E1_ipx_22low0_labr0_slice32 E1_ipx_22low0_labr0_slice64 E1_ipx_main0_1v5h_labr0_slice8 E1_ipx_main0_1v5h_labr0_slice16 E1_ipx_main0_1v5h_labr0_slice32 E1_ipx_main0_1v5h_labr0_slice64 E1_ipx_main0_2v5h_labr0_slice8 E1_ipx_main0_2v5h_labr0_slice16 E1_ipx_main0_2v5h_labr0_slice32 E1_ipx_main0_2v5h_labr0_slice64 E1_ipx_main1_1v5h_labr0_slice8 E1_ipx_main1_1v5h_labr0_slice16 E1_ipx_main1_1v5h_labr0_slice32 E1_ipx_main1_1v5h_labr0_slice64 E1_ipx_main0_nonp_fnp_1v5h_labr0_slice8 E1_ipx_main0_nonp_fnp_1v5h_labr0_slice16 E1_ipx_main0_nonp_fnp_1v5h_labr0_slice32 E1_ipx_main0_nonp_fnp_1v5h_labr0_slice64 E1_ipx_main0_nozrcsf_1v5h_labr0_slice8 E1_ipx_main0_nozrcsf_1v5h_labr0_slice16 E1_ipx_main0_nozrcsf_1v5h_labr0_slice32 E1_ipx_main0_nozrcsf_1v5h_labr0_slice64 E1_ipx_high0_1v5h_labr0_slice8 E1_ipx_high0_1v5h_labr0_slice16 E1_ipx_high0_1v5h_labr0_slice32 E1_ipx_high0_1v5h_labr0_slice64 E1_ConfigSliceHeightSigned_labr0_slice64) 
#paths=(XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH)
#prefix_config='ce4_11_slice_height\/XSM_v1.1.3-high\/'
#configs=(ce4_ipx_low0_labr0_slice8.ini ce4_ipx_low0_labr0_slice16.ini ce4_ipx_low0_labr0_slice32.ini ce4_ipx_low0_labr0_slice64.ini ce4_ipx_22low0_labr0_slice8.ini ce4_ipx_22low0_labr0_slice16.ini ce4_ipx_22low0_labr0_slice32.ini ce4_ipx_22low0_labr0_slice64.ini ce4_ipx_main0_1v5h_labr0_slice8.ini ce4_ipx_main0_1v5h_labr0_slice16.ini ce4_ipx_main0_1v5h_labr0_slice32.ini ce4_ipx_main0_1v5h_labr0_slice64.ini ce4_ipx_main0_2v5h_labr0_slice8.ini ce4_ipx_main0_2v5h_labr0_slice16.ini ce4_ipx_main0_2v5h_labr0_slice32.ini ce4_ipx_main0_2v5h_labr0_slice64.ini ce4_ipx_main1_1v5h_labr0_slice8.ini ce4_ipx_main1_1v5h_labr0_slice16.ini ce4_ipx_main1_1v5h_labr0_slice32.ini ce4_ipx_main1_1v5h_labr0_slice64.ini ce4_ipx_main0_nonp_fnp_1v5h_labr0_slice8.ini ce4_ipx_main0_nonp_fnp_1v5h_labr0_slice16.ini ce4_ipx_main0_nonp_fnp_1v5h_labr0_slice32.ini ce4_ipx_main0_nonp_fnp_1v5h_labr0_slice64.ini ce4_ipx_main0_nozrcsf_1v5h_labr0_slice8.ini ce4_ipx_main0_nozrcsf_1v5h_labr0_slice16.ini ce4_ipx_main0_nozrcsf_1v5h_labr0_slice32.ini ce4_ipx_main0_nozrcsf_1v5h_labr0_slice64.ini ce4_ipx_high0_1v5h_labr0_slice8.ini ce4_ipx_high0_1v5h_labr0_slice16.ini ce4_ipx_high0_1v5h_labr0_slice32.ini ce4_ipx_high0_1v5h_labr0_slice64.ini ce4_ConfigSliceHeightSigned_labr0_slice64.ini)

#for E3
#codecs=(E3_fzrn_pps_0_rps_0_fzrn_nonp E3_fzrn_pps_0_rps_0_zrf+zrcsf_nonp E3_fzrn_pps_1_rps_1_fzrn_nonp E3_fzrn_pps_1_rps_1_zrf+zrcsf_nonp_slice8 E3_fzrn_pps_1_rps_1_zrf+zrcsf_nonp_slice16 E3_fzrn_pps_1_rps_1_zrf+zrcsf_nonp_slice32 E3_fzrn_pps_1_rps_1_zrf+zrcsf_nonp_slice64 E3_high_pps_0_rps_0_zrf_nonp E3_high_pps_0_rps_0_zrf+zrcsf_nonp E3_high_pps_1_rps_1_zrf_nonp E3_high_pps_1_rps_1_zrf+zrcsf_nonp_slice8 E3_high_pps_1_rps_1_zrf+zrcsf_nonp_slice16 E3_high_pps_1_rps_1_zrf+zrcsf_nonp_slice32 E3_high_pps_1_rps_1_zrf+zrcsf_nonp_slice64 E3_high_pps_0_rps_0_zrf E3_high_pps_0_rps_0_zrf+zrcsf E3_high_pps_1_rps_1_zrf E3_high_pps_1_rps_1_zrf+zrcsf)
#paths=(XSMFZRNBOUNDEDSBPATH XSMFZRNBOUNDEDSBPATH XSMFZRNBOUNDEDSBPATH XSMFZRNBOUNDEDSBPATH XSMFZRNBOUNDEDSBPATH XSMFZRNBOUNDEDSBPATH XSMFZRNBOUNDEDSBPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH XSMHIGHPATH)
#prefix_config='ce4_13_fzrn_bnd\/'
#configs=('XSM_v1.1.3-fzrn-bounded-sb\/ce4_fzrn_pps_0_rps_0_fzrn_nonp.ini' 'XSM_v1.1.3-fzrn-bounded-sb\/ce4_fzrn_pps_0_rps_0_zrf+zrcsf_nonp.ini' 'XSM_v1.1.3-fzrn-bounded-sb\/ce4_fzrn_pps_1_rps_1_fzrn_nonp.ini' 'XSM_v1.1.3-fzrn-bounded-sb\/ce4_fzrn_pps_1_rps_1_zrf+zrcsf_nonp_slice8.ini' 'XSM_v1.1.3-fzrn-bounded-sb\/ce4_fzrn_pps_1_rps_1_zrf+zrcsf_nonp_slice16.ini' 'XSM_v1.1.3-fzrn-bounded-sb\/ce4_fzrn_pps_1_rps_1_zrf+zrcsf_nonp_slice32.ini' 'XSM_v1.1.3-fzrn-bounded-sb\/ce4_fzrn_pps_1_rps_1_zrf+zrcsf_nonp_slice64.ini' 'XSM_v1.1.3-high\/ce4_high_pps_0_rps_0_zrf_nonp.ini' 'XSM_v1.1.3-high\/ce4_high_pps_0_rps_0_zrf+zrcsf_nonp.ini' 'XSM_v1.1.3-high\/ce4_high_pps_1_rps_1_zrf_nonp.ini' 'XSM_v1.1.3-high\/ce4_high_pps_1_rps_1_zrf+zrcsf_nonp_slice8.ini' 'XSM_v1.1.3-high\/ce4_high_pps_1_rps_1_zrf+zrcsf_nonp_slice16.ini' 'XSM_v1.1.3-high\/ce4_high_pps_1_rps_1_zrf+zrcsf_nonp_slice32.ini' 'XSM_v1.1.3-high\/ce4_high_pps_1_rps_1_zrf+zrcsf_nonp_slice64.ini' 'XSM_v1.1.3-high\/ce4_high_pps_0_rps_0_zrf.ini' 'XSM_v1.1.3-high\/ce4_high_pps_0_rps_0_zrf+zrcsf.ini' 'XSM_v1.1.3-high\/ce4_high_pps_1_rps_1_zrf.ini' 'XSM_v1.1.3-high\/ce4_high_pps_1_rps_1_zrf+zrcsf.ini')

#for E7 canon v2
codecs=(E17_canon_low10 E17_canon_low20 E17_canon_main10 E17_canon_main20 E17_canon_high10 E17_canon_high20)
paths=(XSMHIGHCLPATH XSMHIGHCLPATH XSMHIGHCLPATH XSMHIGHCLPATH XSMHIGHCLPATH XSMHIGHCLPATH)
prefix_config='ce4_17_profile_comparison\/'
configs=('XSM_v1.1.3-high-cl\/ce4_profile_CanonLow10.ini' 'XSM_v1.1.3-high-cl\/ce4_profile_CanonLow20.ini' 'XSM_v1.1.3-high-cl\/ce4_profile_CanonMain10.ini' 'XSM_v1.1.3-high-cl\/ce4_profile_CanonMain20.ini' 'XSM_v1.1.3-high-cl\/ce4_profile_CanonHigh10.ini' 'XSM_v1.1.3-high-cl\/ce4_profile_CanonHigh20.ini')


for ((a=0; a<${#codecs[@]}; ++a)); do
	codec=${codecs[$a]}
	path=${paths[$a]}
	config=${prefix_config}${configs[$a]}
	echo ${a} ${codec} ${path} ${config} 
	mkdir -p ./${codec}
	cp prototype/prototype.sh ./${codec}/${codec}.sh
	sed -i "s/NAMETOREPLACE/${codec}/g" "./${codec}/${codec}.sh"
	sed -i "s/PATHTOREPLACE/${path}/g" "./${codec}/${codec}.sh"
	sed -i "s/INITOREPLACE/${config}/g" "./${codec}/${codec}.sh"
done
